<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://julesfouchy.github.io/blog</id>
    <title>Jules Fouchy Blog</title>
    <updated>2021-03-19T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://julesfouchy.github.io/blog"/>
    <subtitle>Jules Fouchy Blog</subtitle>
    <icon>https://julesfouchy.github.io/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[Golden White Noise]]></title>
        <id>https://julesfouchy.github.io/blog/2021/03/19/golden-white-noise</id>
        <link href="https://julesfouchy.github.io/blog/2021/03/19/golden-white-noise"/>
        <updated>2021-03-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Every person interested in rendering through fragment shaders has already come across a function like this to generate some white noise:]]></summary>
        <content type="html"><![CDATA[<p>Every person interested in rendering through fragment shaders has already come across a function like this to generate some white noise:</p><div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">vec2</span><span class="token plain"> uv</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fract</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">dot</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uv </span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">vec2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">12.9898</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">78.233</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">43758.5453</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And I used it too, until someone pointed out a big problem to me: on her device my artworks were all messed up! And it turned
out that many people were actually encountering the same problem. (You can see the artifacts in the comparison at the end)</p><p>After a bit of investigation I tracked it down to the <code>random</code> function that was not producing reliable results!
It turned out that depending on the precision of floats supported by your GPU the results were different. For low precision floats the quality of the distribution gets noticeably degraded.</p><p>And at this moment I remembered that guy at the bottom of a StackOverflow discussion claiming that his <code>Gold Noise</code> was much better.
And guess what, he was right! So thank you Dominic Cerisano for this lovely piece of code!</p><div class="language-glsl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-glsl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Gold Noise ©2015 dcerisano@standard3d.com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - based on the Golden Ratio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - uniform normalized distribution</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - fastest static noise generator function (also runs at low precision)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> PHI </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.61803398874989484820459</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Φ = Golden Ratio   </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gold_noise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">vec2</span><span class="token plain"> xy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> seed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fract</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">tan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">distance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">xy</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">PHI</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> xy</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">seed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">xy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Alternatively, you can rely on <a href="https://github.com/ashima/webgl-noise" target="_blank" rel="noopener noreferrer">https://github.com/ashima/webgl-noise</a> for your Perlin / simplex / fractal / <em>etc.</em> noise functions since they don't make use of these pseudorandom number generators.</p></div></div><p>And here is a comparison of the visual results. <code>Gold Noise</code> produces the same (artifact-free) results on all the GPUs I could test with:</p><table><thead><tr><th></th><th>Classic white noise</th><th>Gold Noise</th></tr></thead><tbody><tr><td><strong>Potato GPU</strong></td><td><img loading="lazy" alt="classic potato" src="/assets/images/classic_potato-132779f4f081fbd883fdc61b5da57c42.png" width="650" height="650" class="img_ev3q"></td><td><img loading="lazy" alt="golden potato" src="/assets/images/golden_potato-6133e3bbe78d14874c7d00fbe65c85aa.png" width="650" height="650" class="img_ev3q"></td></tr><tr><td><strong>Good GPU</strong></td><td><img loading="lazy" alt="classic good" src="/assets/images/classic_good-2ca390608a6fb40f51a968da71ee716f.png" width="650" height="650" class="img_ev3q"></td><td><img loading="lazy" alt="golden good" src="/assets/images/golden_good-89ce89a2396dca3188420e62ec52cb68.png" width="650" height="650" class="img_ev3q"></td></tr></tbody></table><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Links</div><div class="admonitionContent_S0QG"><p><a href="https://stackoverflow.com/questions/4200224/random-noise-functions-for-glsl" target="_blank" rel="noopener noreferrer"><em>The corresponding StackOverflow discussion</em></a><br>
<a href="https://www.shadertoy.com/view/fsf3DN" target="_blank" rel="noopener noreferrer"><em>A live comparison of the different types of white noise</em></a></p></div></div>]]></content>
    </entry>
</feed>